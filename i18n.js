// Internationalization (i18n) Translations
const translations = {
    sq: {
        // Navigation
        nav: {
            home: "Shtëpia",
            about: "Rreth Nesh",
            services: "Shërbimet Tona",
            work: "Puna Jonë",
            contact: "Kontakt",
            gallery: "Galeri"
        },
        // Home Page
        home: {
            title: "DURAKU",
            subtitle: "XHEVDET",
            tagline: "MBROJTJA E NDËRTESAVE & DYSHET INDUSTRIALE",
            description: "Veshje dhe restaurime profesionale për dyshet tuaja industriale",
            cta: "Kontaktoni",
            servicesTitle: "Shërbimet Tona",
            portfolioTitle: "Portofoli",
            portfolioSubtitle: "Disa nga projektet tona të suksesshme"
        },
        // About Page
        about: {
            title: "Rreth Nesh",
            subtitle: "Ekspertë në veshje dhe restaurime profesionale",
            description: "DURAKU XHEVDET është një kompani specializuese në mbrojtjen e ndërtesave dhe dyshet industriale. Me vite përvojë në industri, ne ofrojmë zgjidhje profesionale për të gjitha nevojat tuaja të veshjes.",
            experience: "Vite Përvojë",
            projects: "Projekte të Përfunduara",
            clients: "Klientë të Kënaqur",
            team: "Ekipi Ynë",
            teamDesc: "Ekipi ynë i ekspertëve është i përkushtuar për të ofruar cilësi të lartë dhe rezultate të shkëlqyera në çdo projekt."
        },
        // Services Page
        services: {
            title: "Shërbimet Tona",
            subtitle: "Zgjidhje profesionale për të gjitha nevojat tuaja",
            learnMore: "Mëso më shumë →",
            selectCategory: "Zgjidhni kategori:",
            allCategories: "Të Gjitha Kategoritë",
            loading: "Duke ngarkuar shërbimet...",
            service1: {
                title: "Veshje të Të Gjitha Llojeve",
                description: "Veshje profesionale për të gjitha kërkesat - nga epoksi deri te poliuretani"
            },
            service2: {
                title: "Dyshet Industriale",
                description: "Veshje dhe restaurim i dysheveve industriale për qëndrueshmëri dhe ngarkesë maksimale"
            },
            service3: {
                title: "Parkingje & Garazhe Nëntokësore",
                description: "Veshje të specializuara për parkingje dhe garazhe nëntokësore me mbrojtje optimale"
            }
        },
        // Work Page
        work: {
            title: "Puna Jonë",
            subtitle: "Projektet tona më të fundit",
            viewProject: "Shiko Projektin",
            category: "Kategoria"
        },
        // Contact Page
        contact: {
            title: "Kontakt",
            subtitle: "Na kontaktoni për çdo pyetje",
            phone: "Telefoni",
            email: "Email",
            address: "Adresa",
            location: "Lokacioni",
            socialMedia: "Rrjetet Sociale",
            viber: "Viber",
            whatsapp: "WhatsApp",
            getInTouch: "Lidhuni me Ne",
            name: "Emri",
            message: "Mesazhi",
            send: "Dërgo",
            sending: "Duke dërguar...",
            success: "Mesazhi u dërgua me sukses!",
            error: "Gabim. Ju lutemi provoni përsëri."
        },
        // Gallery Page
        gallery: {
            title: "Galeri",
            subtitle: "Para dhe Pas",
            all: "Të Gjitha",
            allCategories: "Të Gjitha Kategoritë",
            selectCategory: "Zgjidhni kategori:",
            before: "Para",
            after: "Pas",
            drag: "Tërhiqeni majtas/djathtas për të parë",
            category: "Kategoria",
            filter: "Filtro",
            viewMore: "Klikoni për të parë më shumë nga galeria e punëve tona",
            loading: "Duke ngarkuar galerinë...",
            categoryDescriptions: {
                industrial: "Veshje dhe restaurim i dysheveve industriale për qëndrueshmëri dhe ngarkesë maksimale. Zgjidhje profesionale për ambiente industriale.",
                parking: "Veshje të specializuara për parkingje dhe garazhe nëntokësore me mbrojtje optimale kundër ujit dhe konsumit.",
                coating: "Veshje profesionale për të gjitha kërkesat - nga epoksi deri te poliuretani. Zgjidhje të personalizuara për çdo projekt."
            }
        },
        // Footer
        footer: {
            rights: "Të gjitha të drejtat e rezervuara.",
            developed: "Zhvilluar nga"
        }
    },
    de: {
        // Navigation
        nav: {
            home: "Startseite",
            about: "Über Uns",
            services: "Unsere Leistungen",
            work: "Unsere Arbeit",
            contact: "Kontakt",
            gallery: "Galerie"
        },
        // Home Page
        home: {
            title: "DURAKU",
            subtitle: "XHEVDET",
            tagline: "BAUTENSCHUTZ & INDUSTRIENBÖDEN",
            description: "Professionelle Beschichtungen und Sanierungen für Ihre Industrieböden",
            cta: "Kontakt aufnehmen",
            servicesTitle: "Unsere Leistungen",
            portfolioTitle: "Portfolio",
            portfolioSubtitle: "Einige unserer erfolgreichen Projekte"
        },
        // About Page
        about: {
            title: "Über Uns",
            subtitle: "Experten für professionelle Beschichtungen und Sanierungen",
            description: "DURAKU XHEVDET ist ein spezialisiertes Unternehmen für Bautenschutz und Industrieböden. Mit jahrelanger Branchenerfahrung bieten wir professionelle Lösungen für alle Ihre Beschichtungsbedürfnisse.",
            experience: "Jahre Erfahrung",
            projects: "Abgeschlossene Projekte",
            clients: "Zufriedene Kunden",
            team: "Unser Team",
            teamDesc: "Unser Expertenteam ist bestrebt, hohe Qualität und hervorragende Ergebnisse bei jedem Projekt zu liefern."
        },
        // Services Page
        services: {
            title: "Unsere Leistungen",
            subtitle: "Professionelle Lösungen für alle Ihre Bedürfnisse",
            learnMore: "Mehr erfahren →",
            selectCategory: "Kategorie wählen:",
            allCategories: "Alle Kategorien",
            loading: "Leistungen werden geladen...",
            service1: {
                title: "Beschichtung aller Art",
                description: "Professionelle Beschichtungen für alle Anforderungen - von Epoxidharz bis Polyurethan"
            },
            service2: {
                title: "Industrieböden",
                description: "Beschichtung und Sanierung von Industrieböden für maximale Haltbarkeit und Belastbarkeit"
            },
            service3: {
                title: "Parkhäuser & Tiefgaragen",
                description: "Spezialisierte Beschichtungen für Parkhäuser und Tiefgaragen mit optimalem Schutz"
            }
        },
        // Work Page
        work: {
            title: "Unsere Arbeit",
            subtitle: "Unsere neuesten Projekte",
            viewProject: "Projekt ansehen",
            category: "Kategorie"
        },
        // Contact Page
        contact: {
            title: "Kontakt",
            subtitle: "Kontaktieren Sie uns bei Fragen",
            phone: "Telefon",
            email: "E-Mail",
            address: "Adresse",
            location: "Standort",
            socialMedia: "Soziale Medien",
            viber: "Viber",
            whatsapp: "WhatsApp",
            getInTouch: "Kontaktieren Sie uns",
            name: "Name",
            message: "Nachricht",
            send: "Senden",
            sending: "Wird gesendet...",
            success: "Nachricht erfolgreich gesendet!",
            error: "Fehler. Bitte versuchen Sie es erneut."
        },
        // Gallery Page
        gallery: {
            title: "Galerie",
            subtitle: "Vorher und Nachher",
            all: "Alle",
            allCategories: "Alle Kategorien",
            selectCategory: "Kategorie wählen:",
            before: "Vorher",
            after: "Nachher",
            drag: "Ziehen Sie links/rechts zum Ansehen",
            category: "Kategorie",
            filter: "Filter",
            viewMore: "Klicken Sie hier, um mehr aus unserer Galerie zu sehen",
            loading: "Galerie wird geladen...",
            categoryDescriptions: {
                industrial: "Beschichtung und Sanierung von Industrieböden für maximale Haltbarkeit und Belastbarkeit. Professionelle Lösungen für Industrieumgebungen.",
                parking: "Spezialisierte Beschichtungen für Parkhäuser und Tiefgaragen mit optimalem Schutz gegen Wasser und Verschleiß.",
                coating: "Professionelle Beschichtungen für alle Anforderungen - von Epoxidharz bis Polyurethan. Maßgeschneiderte Lösungen für jedes Projekt."
            }
        },
        // Footer
        footer: {
            rights: "Alle Rechte vorbehalten.",
            developed: "Entwickelt von"
        }
    }
};

// Language management
let currentLang = localStorage.getItem('language') || 'de';

function setLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    // Update immediately
    updateLanguageSelector();
    updatePageContent();
    
    // Force re-render of all i18n elements
    setTimeout(() => {
        updatePageContent();
    }, 100);
}

function getTranslation(key) {
    const keys = key.split('.');
    let value = translations[currentLang];
    
    for (const k of keys) {
        if (value && value[k]) {
            value = value[k];
        } else {
            return key; // Return key if translation not found
        }
    }
    
    return value;
}

function updateLanguageSelector() {
    const langButtons = document.querySelectorAll('.lang-btn');
    langButtons.forEach(btn => {
        if (btn.dataset.lang === currentLang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = currentLang;
}

function updatePageContent() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (!key) return;
        
        const translation = getTranslation(key);
        if (!translation || translation === key) return; // Skip if translation not found
        
        const tagName = element.tagName.toUpperCase();
        
        if (tagName === 'INPUT' && (element.type === 'text' || element.type === 'email' || element.type === 'tel' || element.type === 'submit')) {
            if (element.type === 'submit') {
                element.value = translation;
            } else {
                element.placeholder = translation;
            }
        } else if (tagName === 'TEXTAREA') {
            element.placeholder = translation;
        } else if (tagName === 'LABEL') {
            element.textContent = translation;
        } else if (tagName === 'BUTTON') {
            element.textContent = translation;
        } else {
            element.textContent = translation;
        }
    });
    
    // Update page title
    const pageTitle = document.querySelector('[data-page-title]');
    if (pageTitle) {
        const titleKey = pageTitle.getAttribute('data-page-title');
        if (titleKey) {
            const title = getTranslation(titleKey);
            if (title && title !== titleKey) {
                document.title = title + ' - DURAKU XHEVDET';
            }
        }
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    updateLanguageSelector();
    updatePageContent();
});

